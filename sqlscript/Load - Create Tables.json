{
	"name": "Load - Create Tables",
	"properties": {
		"content": {
			"query": "--create station dimension table\nCREATE TABLE dbo.DimStation\n(\n    StationKey INT IDENTITY NOT NULL,\n    StationAlternateKey NVARCHAR(15) NOT NULL,\n    StationName NVARCHAR(50) NULL,\n    StationComplex NVARCHAR(50) NULL,\n    Borough NVARCHAR(15) NULL,\n    IsHistorical BIT NULL,\n    Service_Available BIT NULL\n)\nWITH (\n    DISTRIBUTION = REPLICATE,\n    CLUSTERED COLUMNSTORE INDEX\n)\n\n--create transit mode dimension table\nCREATE TABLE dbo.DimTransitMode (\n    TransitModeKey INT IDENTITY NOT NULL,\n    TransitAlternateKey NVARCHAR(50) NOT NULL\n)\nWITH (\n    DISTRIBUTION = REPLICATE,\n    CLUSTERED COLUMNSTORE INDEX\n)\n\n--create payment method dimension table\nCREATE TABLE dbo.DimPaymentMethod (\n    PaymentMethodKey INT IDENTITY NOT NULL,\n    PaymentMethodName NVARCHAR(20) NOT NULL\n)\nWITH (\n    DISTRIBUTION = REPLICATE,\n    CLUSTERED COLUMNSTORE INDEX\n)\n\n--crate fare class category dimension table\nCREATE TABLE dbo.DimFareClass (\n    FareClassKey INT IDENTITY NOT NULL,\n    FareClassCategory NVARCHAR(40) NOT NULL\n)\nWITH (\n    DISTRIBUTION = REPLICATE,\n    CLUSTERED COLUMNSTORE INDEX\n)\n\n--create rides fact table\nCREATE TABLE dbo.FactRides (\n    RideTime DATETIME NOT NULL,\n    StationKey NVARCHAR(15) NOT NULL,\n    TransitModeKey INT NOT NULL,\n    PaymentMethodKey INT NOT NULL,\n    FareClassKey INT NOT NULL,\n    Transfers INT NULL\n)\nWITH\n(\n    DISTRIBUTION = HASH(StationKey),\n    CLUSTERED COLUMNSTORE INDEX\n);\n",
			"metadata": {
				"language": "sql"
			},
			"currentConnection": {
				"databaseName": "mtasqlpool",
				"poolName": "mtasqlpool"
			},
			"resultLimit": 5000
		},
		"type": "SqlQuery"
	}
}